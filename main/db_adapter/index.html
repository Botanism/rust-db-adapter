<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A wrapper around Botanist database scheme"><meta name="keywords" content="rust, rustlang, rust-lang, db_adapter"><title>db_adapter - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../db_adapter/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><h2 class="location">Crate db_adapter</h2><div class="block version"><div class="narrow-helper"></div><p>Version 0.2.6</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all db_adapter's items</p></a><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div><div id="sidebar-vars" data-name="db_adapter" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">db_adapter</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/db_adapter/lib.rs.html#1-113" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A wrapper around Botanist database scheme</p>
<p><a href="https://github.com/Botanism/rust-db-adapter/actions/workflows/rust.yml"><img src="https://github.com/Botanism/rust-db-adapter/actions/workflows/rust.yml/badge.svg" alt="rust-db-adapter" /></a></p>
<h2 id="objective" class="section-header"><a href="#objective">Objective</a></h2>
<p>This crate was built with the intent to provide a safe wrapper around Botanist’s
database scheme. This way invariants remain true at all times, no other tool can
mess the data in an incorrect way.</p>
<p>Centralizing the interactions with the database also allows finer control over
iterations of its scheme. On that note changes in the scheme are done through migrations scripts
(see the <code>migrations</code>) folder. Hence the setup of the database is made very simple with
[<code>sqlx</code>]’s cli tool. Moreover deviations from the scheme provided by the migration scripts
will be detected by the tests (see <code>tests/framework</code> and [<code>mod@sqlx::migrate</code>]).</p>
<p>Finally providing a rust library allows <a href="%5B%60self%60%5D">db_adapter</a> to provide useful abstractions.</p>
<h2 id="setup" class="section-header"><a href="#setup">Setup</a></h2>
<p>Setup is intended to be as simple as possible so if you find some way to simplify a step please open
an issue.
First of all make sure you have a postgresql database up and running. Search online for walkthroughs
if you don’t know how. Then rename <code>.env-example</code> to <code>.env</code> and enter make sure you place your values
in it.
Now install <a href="https://github.com/launchbadge/sqlx/tree/master/sqlx-cli">sqlx-cli</a> and run the migrations using <code>sqlx migrate run</code>. If you set up the DB and <code>.env</code>
correctly you should be good to go!
If you’re only using the library you don’t need to do anything else but you could still
run the tests just in case: <code>cargo t</code>.</p>
<h2 id="developement" class="section-header"><a href="#developement">Developement</a></h2>
<p>To contribute to <a href="%5B%60self%60%5D">db_adapter</a> you should setup the test environement. In addition to the previous section’s
steps you should setup another DB for the tests and refer it in <code>.env</code>. From there you can dive in the code!
Just make sure you don’t break any invariants and remember to respect semver. You are also expected
to document and tests any item added to the public API.</p>
</div></details><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="guild/index.html" title="db_adapter::guild mod">guild</a></div><div class="item-right docblock-short"><p>A <a href="https://docs.rs/serenity/*/serenity/model/guild/struct.Guild.html">Guild</a>’s preferences (aka: configuration)</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="slap/index.html" title="db_adapter::slap mod">slap</a></div><div class="item-right docblock-short"><p>Interface for the slap system</p>
</div></div></div><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.AdapterError.html" title="db_adapter::AdapterError enum">AdapterError</a></div><div class="item-right docblock-short"><p>Wrapper around all errors coming from the crate</p>
</div></div></div><h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.establish_connection.html" title="db_adapter::establish_connection fn">establish_connection</a></div><div class="item-right docblock-short"><p>Creates a <a href="type.PgPool.html">connection pool</a> to the database</p>
</div></div></div><h2 id="types" class="section-header"><a href="#types">Type Definitions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.PgPool.html" title="db_adapter::PgPool type">PgPool</a></div><div class="item-right docblock-short"><p>An alias for [<code>Pool</code>][crate::pool::Pool], specialized for Postgres.</p>
</div></div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="db_adapter" data-search-index-js="../search-index.js" data-search-js="../search.js"></div>
    <script src="../main.js"></script>
</body></html>